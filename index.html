<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tg Cloud</title>
    <!-- Telegram SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- –≠–ö–†–ê–ù –ë–õ–û–ö–ò–†–û–í–ö–ò (–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ user.is_blocked = true) -->
    <div id="blocked-screen" class="blocked-screen" style="display: none;">
        <i class="fas fa-lock lock-icon"></i>
        <h2>–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</h2>
        <p>–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.</p>
    </div>

    <!-- –•–ï–î–ï–† –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø -->
    <div class="app-header">
        <div class="app-title" id="header-title">
            <i class="fas fa-cloud"></i> Tg Cloud
        </div>
        <div class="settings-btn" onclick="openSettings()">
            <i class="fas fa-cog"></i>
        </div>
    </div>

    <!-- –í–ï–†–•–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø (–¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–æ–∫) -->
    <div class="top-nav" id="top-nav" style="display: none;">
        <div class="breadcrumbs" onclick="goBack()">
            <i class="fas fa-chevron-left"></i> <span data-i18n="back">–ù–∞–∑–∞–¥</span>
        </div>
        <!-- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—ë" -->
        <div class="nav-action-btn" onclick="downloadAllInFolder()">
            <span data-i18n="save_all">–°–æ—Ö—Ä. –≤—Å—ë</span> <i class="fas fa-download"></i>
        </div>
    </div>

    <!-- –ò–ù–î–ò–ö–ê–¢–û–† –†–ï–ñ–ò–ú–ê –ê–î–ú–ò–ù–ê (–ï—Å–ª–∏ –≤–æ—à–ª–∏ –≤ —á—É–∂–æ–π –∞–∫–∫–∞—É–Ω—Ç) -->
    <div id="admin-indicator" class="admin-indicator" style="display: none;" onclick="exitAdminMode()">
        <i class="fas fa-user-secret"></i> –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ <small>(–ù–∞–∂–º–∏ –¥–ª—è –≤—ã—Ö–æ–¥–∞)</small>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <div style="position: relative; min-height: 100vh;">
        <!-- –°–µ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ -->
        <div class="grid" id="file-grid"></div>
        
        <!-- –õ–æ–∞–¥–µ—Ä (–°–ø–∏–Ω–Ω–µ—Ä) -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù –ù–ê–°–¢–†–û–ï–ö -->
    <div id="settings-view" class="settings-view" style="display: none;">
        <div class="settings-header">
            <h2 data-i18n="settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <div class="close-settings" onclick="closeSettings()">
                <i class="fas fa-times"></i>
            </div>
        </div>

        <div class="settings-content">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è (–ö–ª–∏–∫ –ø–æ –∞–≤–∞—Ç–∞—Ä—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω–∫—É, –µ—Å–ª–∏ —Ç—ã –∞–¥–º–∏–Ω) -->
            <div class="profile-card">
                <div class="profile-avatar" id="profile-avatar" onclick="handleAvatarClick()">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-info">
                    <h3 id="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                    <p id="profile-username">@...</p>
                </div>
            </div>

            <!-- –°–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            <div class="stats-grid">
                <div class="stat-item">
                    <i class="fas fa-image" style="color: #34c759;"></i>
                    <span id="stat-photos">0</span>
                    <small data-i18n="stat_photos">–§–æ—Ç–æ</small>
                </div>
                <div class="stat-item">
                    <i class="fas fa-video" style="color: #007aff;"></i>
                    <span id="stat-videos">0</span>
                    <small data-i18n="stat_videos">–í–∏–¥–µ–æ</small>
                </div>
                <div class="stat-item">
                    <i class="fas fa-file-alt" style="color: #ff9f0a;"></i>
                    <span id="stat-docs">0</span>
                    <small data-i18n="stat_files">–§–∞–π–ª—ã</small>
                </div>
                <div class="stat-item">
                    <i class="fas fa-folder" style="color: #ffd60a;"></i>
                    <span id="stat-folders">0</span>
                    <small data-i18n="stat_folders">–ü–∞–ø–∫–∏</small>
                </div>
            </div>

            <!-- –•—Ä–∞–Ω–∏–ª–∏—â–µ -->
            <div class="storage-section">
                <div class="storage-labels">
                    <span><span data-i18n="used">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</span>: <b id="storage-used">0 MB</b></span>
                    <span><span data-i18n="unlimited">–ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ</span> ‚àû</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 2%;"></div>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div class="settings-list">
                
                <!-- 1. –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏ -->
                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fas fa-th"></i> <span data-i18n="grid_size">–°–µ—Ç–∫–∞</span>
                    </div>
                    <div class="segmented-control three-options" id="grid-switch">
                        <div class="segmented-option" onclick="setGridSize(2)" data-val="2">2</div>
                        <div class="segmented-option" onclick="setGridSize(3)" data-val="3">3</div>
                        <div class="segmented-option" onclick="setGridSize(4)" data-val="4">4</div>
                        <div class="segmented-glider" id="grid-glider"></div>
                    </div>
                </div>

                <!-- 2. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fas fa-sort-amount-down"></i> <span data-i18n="sort">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</span>
                    </div>
                    <div class="segmented-control three-options" id="sort-switch">
                        <div class="segmented-option" onclick="setSort('date')" data-val="date"><i class="far fa-clock"></i></div>
                        <div class="segmented-option" onclick="setSort('name')" data-val="name">A-Z</div>
                        <div class="segmented-option" onclick="setSort('size')" data-val="size"><i class="fas fa-weight-hanging"></i></div>
                        <div class="segmented-glider" id="sort-glider"></div>
                    </div>
                </div>

                <!-- 3. –¢–µ–º–∞ -->
                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fas fa-adjust"></i> <span data-i18n="theme">–¢–µ–º–∞</span>
                    </div>
                    <div class="segmented-control" id="theme-switch">
                        <div class="segmented-option" onclick="setTheme('dark')" data-val="dark" data-i18n="theme_dark">–¢—ë–º–Ω–∞—è</div>
                        <div class="segmented-option" onclick="setTheme('light')" data-val="light" data-i18n="theme_light">–°–≤–µ—Ç–ª–∞—è</div>
                        <div class="segmented-glider" id="theme-glider"></div>
                    </div>
                </div>
                
                <!-- 4. –Ø–∑—ã–∫ -->
                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fas fa-globe"></i> <span data-i18n="language">–Ø–∑—ã–∫</span>
                    </div>
                    <div class="segmented-control" id="lang-switch">
                        <div class="segmented-option" onclick="changeLanguage('ru')" data-val="ru">RU</div>
                        <div class="segmented-option" onclick="changeLanguage('en')" data-val="en">EN</div>
                        <div class="segmented-glider" id="lang-glider"></div>
                    </div>
                </div>

                <!-- 5. –£–¥–∞–ª–∏—Ç—å –≤—Å—ë -->
                <div class="setting-row danger" onclick="confirmDeleteAll()">
                    <div class="setting-label">
                        <i class="fas fa-trash-alt"></i> <span data-i18n="delete_all">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</span>
                    </div>
                </div>
            </div>

            <div style="text-align: center; color: var(--text-secondary); margin-top: 30px; font-size: 12px;">
                Tg Cloud v3.0
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê: ADMIN PANEL -->
    <div id="modal-admin" class="modal-overlay">
        <div class="modal-box glass-box" style="max-width: 350px; height: 70vh; display: flex; flex-direction: column;">
            <h3>üëë Admin Panel</h3>
            <div id="admin-user-list" style="flex: 1; overflow-y: auto; margin-top: 10px;">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
            <div class="modal-buttons">
                <button class="btn btn-sec" onclick="closeModals()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ö–û–ù–¢–ï–ö–°–¢–ù–û–ï –ú–ï–ù–Æ -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-item" onclick="actionInfo()">
            <i class="fas fa-info-circle"></i> <span data-i18n="action_info">–ò–Ω—Ñ–æ</span>
        </div>
        <div class="context-item" onclick="actionShare()">
            <i class="fas fa-share-alt"></i> <span data-i18n="action_share">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
        </div>
        <div class="context-item" onclick="actionMove()">
            <i class="fas fa-folder-open"></i> <span data-i18n="action_move">–í –ø–∞–ø–∫—É</span>
        </div>
        <div class="context-item" onclick="actionRenamePrompt()">
            <i class="fas fa-edit"></i> <span data-i18n="action_rename">–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</span>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ "–£–±—Ä–∞—Ç—å" –¥–ª—è —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ -->
        <div class="context-item" id="btn-remove-from-folder" onclick="actionRemoveFromFolder()" style="display: none; color: #ff9f0a;">
            <i class="fas fa-folder-minus"></i> <span data-i18n="action_remove">–£–±—Ä–∞—Ç—å</span>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –æ–±—ã—á–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è -->
        <div class="context-item delete" onclick="confirmDelete(false)">
            <i class="fas fa-trash"></i> <span data-i18n="action_delete">–£–¥–∞–ª–∏—Ç—å</span>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–∞–ø–æ–∫) -->
        <div class="context-item delete" id="btn-delete-recursive" onclick="confirmDelete(true)" style="display: none;">
            <i class="fas fa-trash-alt"></i> <span data-i18n="action_delete_rec">–° —Ñ–∞–π–ª–∞–º–∏</span>
        </div>
    </div>
    <div id="menu-overlay" class="menu-overlay" onclick="closeContextMenu()" style="display: none;"></div>

    <!-- –ú–û–î–ê–õ–ö–ê: –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
    <div id="modal-info" class="modal-overlay">
        <div class="modal-box glass-box">
            <h3 data-i18n="file_info">–°–≤–æ–π—Å—Ç–≤–∞</h3>
            <table class="info-table">
                <tr>
                    <td class="info-label" data-i18n="info_name">–ò–º—è</td>
                    <td class="info-value" id="info-name"></td>
                </tr>
                <tr>
                    <td class="info-label" data-i18n="info_type">–¢–∏–ø</td>
                    <td class="info-value" id="info-type"></td>
                </tr>
                <tr>
                    <td class="info-label" data-i18n="info_size">–†–∞–∑–º–µ—Ä</td>
                    <td class="info-value" id="info-size"></td>
                </tr>
                <tr>
                    <td class="info-label" data-i18n="info_date">–î–∞—Ç–∞</td>
                    <td class="info-value" id="info-date"></td>
                </tr>
            </table>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="closeModals()" data-i18n="btn_close">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê: –í–í–û–î –¢–ï–ö–°–¢–ê (–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ / –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) -->
    <div id="modal-prompt" class="modal-overlay">
        <div class="modal-box glass-box">
            <h3 id="prompt-title">...</h3>
            <input type="text" class="modal-input" id="prompt-input" autocomplete="off">
            <div class="modal-buttons">
                <button class="btn btn-sec" onclick="closeModals()" data-i18n="btn_cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="prompt-submit-btn" data-i18n="btn_ok">–û–ö</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï (–£–¥–∞–ª–µ–Ω–∏–µ) -->
    <div id="modal-confirm" class="modal-overlay">
        <div class="modal-box glass-box">
            <h3 id="confirm-title" data-i18n="confirm_title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
            <p id="confirm-text" style="margin: 10px 0; font-size: 14px; color: var(--text-secondary);">...</p>
            <div class="modal-buttons">
                <button class="btn btn-sec" onclick="closeModals()" data-i18n="btn_cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-danger" id="confirm-submit-btn" data-i18n="btn_delete">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–ö–ê: –í–´–ë–û–† –ü–ê–ü–ö–ò (–ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï) -->
    <div id="modal-select-folder" class="modal-overlay">
        <div class="modal-box glass-box">
            <h3 data-i18n="modal_move_to">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤...</h3>
            <div class="modal-list" id="folder-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="modal-buttons">
                <button class="btn btn-sec" onclick="closeModals()" data-i18n="btn_cancel">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (Toast) -->
    <div id="toast" class="toast">–°–æ–æ–±—â–µ–Ω–∏–µ</div>

    <!-- FAB: –ö–ù–û–ü–ö–ê –ü–õ–Æ–° -->
    <div class="fab-add" id="fab-add" onclick="openCreateFolderModal()">
        <i class="fas fa-plus"></i>
    </div>

    <!-- –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="bottom-bar">
        <i class="nav-item fas fa-home active" onclick="setTab('all', this)"></i> 
        <i class="nav-item fas fa-image" onclick="setTab('image', this)"></i>
        <i class="nav-item fas fa-video" onclick="setTab('video', this)"></i>
        <i class="nav-item fas fa-file-alt" onclick="setTab('doc', this)"></i>
        <i class="nav-item fas fa-folder" onclick="setTab('folders', this)"></i>
    </div>

    <!-- –°–ö–†–ò–ü–¢ –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø -->
    <script src="app.js"></script>
</body>
</html>